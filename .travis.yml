language: node_js
cache:
  directories:
  - node_modules
env:
  global:
  - NODE_ENV=development
install:
- npm install
before_script:
- |
  if [ "$TRAVIS_BRANCH" = master ]; then
    echo "Starting production build"
    export NODE_ENV="production"
  elif [ "$TRAVIS_BRANCH" = staging ]; then
    echo "Starting staging build"
    export NODE_ENV="staging"
  fi
- npm run lint
- npm run test
script: npm run build
deploy:
  provider: pages
  skip_cleanup: true
  local_dir: docs
  github_token: oP5a2Zh0lA1BfUkP0DzqWMEU/GErPPWLp1/h3twfY6l3wvs58GzZHkE7bf9Y/EPDk4e5xigxLAEXMI4U8pq8sngant6gAfP9+W31JjVXN6UD0clY0m45WPcFdn5B6AB91Kguo1lXLRWKocrBdVjYP981zE3VKIT9yOosD5koJHprKfXaf/yQCiCoxgn9V+EaQni/6ZOHxnRwDzYvi6WH8Kd3AaWqMeD0gxdcD1Dnu2yuHwrwBvwYqm7WEQ9joCZ7q33Bb+/K6r4VihaxWmVdtQi2qqj89W61+xTPF5edd4fi4EUPnqe9nVl5I1ssN5IPfsp0fzyQnrYnsRGkDogKVF5elj7EiwFfWXmylipusDg79rIuYgoIK18pcT2okRlXV5EDxz1iRJJ0UlhB/a51MRTy3pl8GVoKaRPescDUTV4w6gHBGPgUBlYcFSUJI8p4xySVgmHtHClywQESJxW01CQ97n15ciu32gAEUJXk5BNrt0na2kvyyFuExzSLrzon+hvesuzw5MXj+eIAkzsDj71fYpw0CvhjewpjwgGXmrZ2VaCStvIae8nbOvrIdy7mMeBriki4j0ochrJmYslohYkazJpyqyKXG03X2/ZkGfl+6WAyFkcrMLkx8+H8u9PVOAvl3GKfAiOK5y+OENg+Mk1SyI0mSDDlwDsJbAwhfbg=
  on:
    all_branches: true
