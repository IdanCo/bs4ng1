language: node_js
cache:
  bundler: true
  directories:
    - node_modules
env:
  global:
  - NODE_ENV=development
  matrix:
    secure: dFeUAREMY0o78K7g12NoHyGm/I3CR4Koq5K0Top5hv4+yRkUuuoFIfoVYQMb7uRtBwL614ibw2h1wh8mt9K/eB27mFz5lp3FGGP/J82pAweLxmeH8Hc+Gjz96N1ZgHxzH4crY6bzhg0M4RtPe0L/qfgVVKNZyXO7H7V68G+Dfz7OAqNhebe2uyJubVd2XhYshPwUYWRZUeX/AZpZjBJSymXx71QrCebwOnJsz3WSzrFBmQNsXd2z+cbBZLl53RE9hXMyBReZwXN5Q8udk5scquPAXw5tBgXYffeQEJlI+efUyr8+eGoZXAnw/857LOEb1d6l5XIglFOi7h5irHweMtayThx8To5bd+YQru7+/l3Ox7ExFehC2sWn6N8UQuQ05IgeFdnGyPRYJQJQT2gyOE0uP5GAWOR8zM3OA+KALPMZBnB4tm1Mmo5++NuD/r+rwHI4ouxewB91kAQaGBslNe+dYrSke3iGTFBeLATwNwbjA71Kn21ffXoNi0nlY20zvyI9PyIxakCI0zrInobGBtngozwtYZTu0X8ubkKU4V5evHf7Z8QkbGbQe0BokT86HKV3SWZsTZdvD1FLIXA17REVuwPzWokcU8dEL50rJX7k8ZUa+4o9jA413tL4uykZ0taRssXi7WfXltk4SCS1UNtbYYMjtXYp7ziR1jxwKMY=
install:
- npm install
before_script:
- |
  if [ "$TRAVIS_BRANCH" = master ]; then
    echo "Starting production build"
    export NODE_ENV="production"
  elif [ "$TRAVIS_BRANCH" = staging ]; then
    echo "Starting staging build"
    export NODE_ENV="staging"
  fi
- npm run lint
- npm run test
script: npm run build
deploy:
  - provider: pages
    skip_cleanup: true
    local_dir: docs
    github_token: $GITHUB_TOKEN
    on:
      all_branches: true
  - provider: releases
    api_key:
      secure: oP5a2Zh0lA1BfUkP0DzqWMEU/GErPPWLp1/h3twfY6l3wvs58GzZHkE7bf9Y/EPDk4e5xigxLAEXMI4U8pq8sngant6gAfP9+W31JjVXN6UD0clY0m45WPcFdn5B6AB91Kguo1lXLRWKocrBdVjYP981zE3VKIT9yOosD5koJHprKfXaf/yQCiCoxgn9V+EaQni/6ZOHxnRwDzYvi6WH8Kd3AaWqMeD0gxdcD1Dnu2yuHwrwBvwYqm7WEQ9joCZ7q33Bb+/K6r4VihaxWmVdtQi2qqj89W61+xTPF5edd4fi4EUPnqe9nVl5I1ssN5IPfsp0fzyQnrYnsRGkDogKVF5elj7EiwFfWXmylipusDg79rIuYgoIK18pcT2okRlXV5EDxz1iRJJ0UlhB/a51MRTy3pl8GVoKaRPescDUTV4w6gHBGPgUBlYcFSUJI8p4xySVgmHtHClywQESJxW01CQ97n15ciu32gAEUJXk5BNrt0na2kvyyFuExzSLrzon+hvesuzw5MXj+eIAkzsDj71fYpw0CvhjewpjwgGXmrZ2VaCStvIae8nbOvrIdy7mMeBriki4j0ochrJmYslohYkazJpyqyKXG03X2/ZkGfl+6WAyFkcrMLkx8+H8u9PVOAvl3GKfAiOK5y+OENg+Mk1SyI0mSDDlwDsJbAwhfbg=
    file: "dist/*"
    file_glob: true
    skip_cleanup: true
    on:
      repo: IdanCo/ng1bs4
      branch: feature/travis
